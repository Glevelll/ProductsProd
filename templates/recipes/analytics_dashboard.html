{% extends 'base.html' %}

{% block title %}{{ title }} - {{ block.super }}{% endblock %}

{% block content %}
<h1 style="margin-bottom: 2rem; color: #2c3e50;">üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ä–µ—Ü–µ–ø—Ç–æ–≤</h1>

<div style="margin-bottom: 2rem;">
    <a href="{% url 'statistics' %}" class="btn btn-primary">Pandas –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
    <a href="{% url 'dbapi_stats' %}" class="btn btn-primary">dbAPI –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
    <a href="{% url 'export_excel' %}" class="btn btn-success">–≠–∫—Å–ø–æ—Ä—Ç –≤ Excel</a>
    <a href="{% url 'export_csv' %}" class="btn btn-success">–≠–∫—Å–ø–æ—Ä—Ç –≤ CSV</a>
</div>

<div style="background: white; padding: 2rem; border-radius: 10px; margin-bottom: 2rem;">
    <h2 style="color: #2c3e50; margin-bottom: 1rem;">–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (Matplotlib & Seaborn)</h2>
    <p style="color: #666;">
        –í—Å–µ –≥—Ä–∞—Ñ–∏–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫ matplotlib –∏ seaborn –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤.
    </p>
</div>

{% if visualizations %}
    {% if visualizations.cooking_time_distribution %}
    <div style="background: white; padding: 2rem; border-radius: 10px; margin-bottom: 2rem;">
        <h3 style="color: #2c3e50;">–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è</h3>
        <img src="data:image/png;base64,{{ visualizations.cooking_time_distribution }}" 
             style="width: 100%; height: auto;" alt="Cooking Time Distribution">
    </div>
    {% endif %}

    {% if visualizations.servings_distribution %}
    <div style="background: white; padding: 2rem; border-radius: 10px; margin-bottom: 2rem;">
        <h3 style="color: #2c3e50;">–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø–æ—Ä—Ü–∏–π</h3>
        <img src="data:image/png;base64,{{ visualizations.servings_distribution }}" 
             style="width: 100%; height: auto;" alt="Servings Distribution">
    </div>
    {% endif %}

    {% if visualizations.top_ingredients %}
    <div style="background: white; padding: 2rem; border-radius: 10px; margin-bottom: 2rem;">
        <h3 style="color: #2c3e50;">–¢–æ–ø –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤</h3>
        <img src="data:image/png;base64,{{ visualizations.top_ingredients }}" 
             style="width: 100%; height: auto;" alt="Top Ingredients">
    </div>
    {% endif %}

    {% if visualizations.recipes_by_author %}
    <div style="background: white; padding: 2rem; border-radius: 10px; margin-bottom: 2rem;">
        <h3 style="color: #2c3e50;">–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–æ–≤ –ø–æ –∞–≤—Ç–æ—Ä–∞–º</h3>
        <img src="data:image/png;base64,{{ visualizations.recipes_by_author }}" 
             style="width: 100%; height: auto;" alt="Recipes by Author">
    </div>
    {% endif %}

    {% if visualizations.recipes_timeline %}
    <div style="background: white; padding: 2rem; border-radius: 10px; margin-bottom: 2rem;">
        <h3 style="color: #2c3e50;">–î–∏–Ω–∞–º–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ—Ü–µ–ø—Ç–æ–≤</h3>
        <img src="data:image/png;base64,{{ visualizations.recipes_timeline }}" 
             style="width: 100%; height: auto;" alt="Recipes Timeline">
    </div>
    {% endif %}

    {% if visualizations.cooking_time_vs_ingredients %}
    <div style="background: white; padding: 2rem; border-radius: 10px; margin-bottom: 2rem;">
        <h3 style="color: #2c3e50;">–í—Ä–µ–º—è vs –ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã</h3>
        <img src="data:image/png;base64,{{ visualizations.cooking_time_vs_ingredients }}" 
             style="width: 100%; height: auto;" alt="Cooking Time vs Ingredients">
    </div>
    {% endif %}

    {% if visualizations.correlation_heatmap %}
    <div style="background: white; padding: 2rem; border-radius: 10px; margin-bottom: 2rem;">
        <h3 style="color: #2c3e50;">–ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤</h3>
        <img src="data:image/png;base64,{{ visualizations.correlation_heatmap }}" 
             style="width: 100%; height: auto;" alt="Correlation Heatmap">
    </div>
    {% endif %}

    {% if visualizations.ingredient_units %}
    <div style="background: white; padding: 2rem; border-radius: 10px; margin-bottom: 2rem;">
        <h3 style="color: #2c3e50;">–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è</h3>
        <img src="data:image/png;base64,{{ visualizations.ingredient_units }}" 
             style="width: 100%; height: auto;" alt="Ingredient Units">
    </div>
    {% endif %}
{% else %}
    <p style="text-align: center; color: #666;">–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏.</p>
{% endif %}
{% endblock %}

